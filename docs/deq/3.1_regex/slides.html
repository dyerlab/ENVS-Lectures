<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>The Title</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/middlebury.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/middlebury-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
    <script src="libs/str_view-binding-1.4.0/str_view.js"></script>
    <link rel="stylesheet" href="deq-styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: left, bottom
background-image: url("images/contour.png")
background-position: right
background-size: auto


# Regular Expressions



### What the what?  And where?


&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;img src="images/logo1.svg" width="400px"&gt;




---

class: sectionTitle

# Regular Expressions


## Searching with Wildcards



---

# Regular Expressions

This could be a whole .red[frickin] class in itself.  I'm going to keep it very simple here so you have enough knowledge to get in trouble.

&gt; Regular Expression is a sequence of characters that defines a search pattern.  These are **very terse** descriptions of textual patterns.


--


```r
library( tidyverse )
```

```
## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──
```

```
## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.1.1     ✓ forcats 0.5.1
```

```
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
```

```r
names &lt;- c("Kingsley","Plimpton","Ted Knight", "Zissou")
names
```

```
## [1] "Kingsley"   "Plimpton"   "Ted Knight" "Zissou"
```


---

# Visualizing Matches for Learning

The function `str_view()` is designed to **only** show you where matches are made to help you learn regex, we **never** actually use it in practice.  

Visualizing matches for the letter *i* 


```r
str_view( names, "i")
```

<div id="htmlwidget-3e393f477901aca01aed" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-3e393f477901aca01aed">{"x":{"html":"<ul>\n  <li>K<span class='match'>i<\/span>ngsley<\/li>\n  <li>Pl<span class='match'>i<\/span>mpton<\/li>\n  <li>Ted Kn<span class='match'>i<\/span>ght<\/li>\n  <li>Z<span class='match'>i<\/span>ssou<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>


---

# Positional Matches

Matching based upon position can be used with the addition of a special character.  Here the `$` indicates that it is at the .red[very end] of the string.


```r
str_view( names, "n$")
```

<div id="htmlwidget-e39ccee4460e95c0fa60" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-e39ccee4460e95c0fa60">{"x":{"html":"<ul>\n  <li>Kingsley<\/li>\n  <li>Plimpto<span class='match'>n<\/span><\/li>\n  <li>Ted Knight<\/li>\n  <li>Zissou<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

---

# Positional Matches

And the `^` character marks .red[the beginning] of a string.


```r
str_view( names, "^K")
```

<div id="htmlwidget-301e390a1c9d8c28060b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-301e390a1c9d8c28060b">{"x":{"html":"<ul>\n  <li><span class='match'>K<\/span>ingsley<\/li>\n  <li>Plimpton<\/li>\n  <li>Ted Knight<\/li>\n  <li>Zissou<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

Notice how it *does not* match the 'K' in Knight.

---

# Character Classes

We can also match kinds of characters such as a number, whose shortcut is `\d`.  However, to have it match as a character class, we need to be careful of the `\` character.  

There are some special characters such as `\t` (tab), `\r` (carrage return), and `\n` newline that are shorthand ways of indicating these non-printing entities on your keyboard.  As such, a `\` is treated .red[speically] to indicate that the next glyph will indicate a special character.  But if we try to use it like this:


```r
str_view( myClasses, "\d" )
```
.red[```#  Error: '\d' is an unrecognized escape in character string starting ""\d"```]


Which is an error.  

---

# Character Classes

This is because the digit indication for a regular expression includes a `\` not as a "escape character" but as part of it directly!  So, we need to escape it as well (confused yet?  stick with me, it will get better).

So to match the first generic number in each of the entries, we would use


```r
myClasses &lt;- str_c("ENVS", c(521, 543, 601, 602), sep="-" )
str_view( myClasses, "\\d" )
```

<div id="htmlwidget-e349bd1d7d3fbdc3baf2" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-e349bd1d7d3fbdc3baf2">{"x":{"html":"<ul>\n  <li>ENVS-<span class='match'>5<\/span>21<\/li>\n  <li>ENVS-<span class='match'>5<\/span>43<\/li>\n  <li>ENVS-<span class='match'>6<\/span>01<\/li>\n  <li>ENVS-<span class='match'>6<\/span>02<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

---

# Number of Character Classes

You can match more than one of the characters.


```r
str_view(myClasses, "\\d\\d")
```

<div id="htmlwidget-02d6f376a79ea50f02a6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-02d6f376a79ea50f02a6">{"x":{"html":"<ul>\n  <li>ENVS-<span class='match'>52<\/span>1<\/li>\n  <li>ENVS-<span class='match'>54<\/span>3<\/li>\n  <li>ENVS-<span class='match'>60<\/span>1<\/li>\n  <li>ENVS-<span class='match'>60<\/span>2<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

---

# Matching "other" 

The `"."` character indicates another glyph (of any type) 


```r
str_view( myClasses, "\\d.+")
```

<div id="htmlwidget-ef93dbcd1c469204acfc" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-ef93dbcd1c469204acfc">{"x":{"html":"<ul>\n  <li>ENVS-<span class='match'>521<\/span><\/li>\n  <li>ENVS-<span class='match'>543<\/span><\/li>\n  <li>ENVS-<span class='match'>601<\/span><\/li>\n  <li>ENVS-<span class='match'>602<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>


---

# Finding Words

We can also match on 'words' or 'whitespace'.


```r
text &lt;- "It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of light, it was the season of darkness, it was the spring of hope, it was the winter of despair."
```

This grabs the first word (grabbed by the `\\w` that is immediately followed by a comma.)

```r
str_view( text, "\\w\\,")
```

<div id="htmlwidget-4fbd5f196a220c10384b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-4fbd5f196a220c10384b">{"x":{"html":"<ul>\n  <li>It was the best of time<span class='match'>s,<\/span> it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of light, it was the season of darkness, it was the spring of hope, it was the winter of despair.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>



```r
str_view( text, "\\w\\s(belief)")
```

<div id="htmlwidget-2424cc9563ae1f46a1e6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-2424cc9563ae1f46a1e6">{"x":{"html":"<ul>\n  <li>It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch o<span class='match'>f belief<\/span>, it was the epoch of incredulity, it was the season of light, it was the season of darkness, it was the spring of hope, it was the winter of despair.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

---

# Numbers of matches

We can match things by the number of occurrences.  Consider the following searches for the lowercase letter `o`.

- `o*` Finding zero or more times
- `o+` Finding one or more times.
- `o?` Either 0 or 1 times


```r
str_view( text, "o+")
```

<div id="htmlwidget-3c0cd3d7d4cf99e6f15d" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-3c0cd3d7d4cf99e6f15d">{"x":{"html":"<ul>\n  <li>It was the best <span class='match'>o<\/span>f times, it was the worst of times, it was the age of wisdom, it was the age of foolishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of light, it was the season of darkness, it was the spring of hope, it was the winter of despair.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>


---

# Finding `N` items.


```r
year_1888 &lt;- "MDCCCLXXXVIII"
str_view( year_1888, "X{3}")
```

<div id="htmlwidget-d12bab5fb88b73ad16fd" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d12bab5fb88b73ad16fd">{"x":{"html":"<ul>\n  <li>MDCCCL<span class='match'>XXX<\/span>VIII<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>



---

# Variable Numbers of Matches

How about finding where the string contains either 2 consecutive lowercase 'o' values? 


```r
str_view( text, "o{2,3}" )
```

<div id="htmlwidget-46b8f399dd6055362ae8" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-46b8f399dd6055362ae8">{"x":{"html":"<ul>\n  <li>It was the best of times, it was the worst of times, it was the age of wisdom, it was the age of f<span class='match'>oo<\/span>lishness, it was the epoch of belief, it was the epoch of incredulity, it was the season of light, it was the season of darkness, it was the spring of hope, it was the winter of despair.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>


---

# A Greedy Algorithm

Given the opportunity, it will identify the location of the longest match.



```r
str_view( year_1888, "C{1,4}")
```

<div id="htmlwidget-003297fca069a71d9359" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-003297fca069a71d9359">{"x":{"html":"<ul>\n  <li>MD<span class='match'>CCC<\/span>LXXXVIII<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>



---

# Locating the Position of Elements


```r
str_locate( text, "epoch")
```

```
##      start end
## [1,]   122 126
```

---

# Locating Every Instance of an Element

Finding *all* the start and ending positions for a particular sequence.


```r
str_locate_all( text, "it was the")
```

```
## [[1]]
##       start end
##  [1,]    27  36
##  [2,]    54  63
##  [3,]    80  89
##  [4,]   111 120
##  [5,]   139 148
##  [6,]   172 181
##  [7,]   200 209
##  [8,]   231 240
##  [9,]   258 267
```

--

From this `str_sub()` can be used to extract elements within (or between) identified occurances.  Here is an example of the 


```r
str_sub( text, 80, 110)
```

```
## [1] "it was the age of foolishness, "
```





---

# Extracting Elements

We can do a similar thing to pull out the components.


```r
str_extract( text, "epoch")
```

```
## [1] "epoch"
```

```r
str_extract_all( text, "it was the")
```

```
## [[1]]
## [1] "it was the" "it was the" "it was the" "it was the" "it was the"
## [6] "it was the" "it was the" "it was the" "it was the"
```


---

# Some More Options

It will be more exciting if we could use `str_extract()` in a way that allows us to capture more than just **exactly** what we asked for it to find.  


Item | Definition
-----|-----------------------------  
`^`  | The start of a string match  
`$`  | The end of a string match  
`(`  | The start of a capture group  
`)`  | The end of a capture group  

---

# More Exciting, no?

So, if we want to find the .red[word] that occurs right before the comma in the text, we create a *capture group* representing one or more word elements (`\w`) followed by a comma. 



```r
str_extract_all( text, "(\\w*)," )
```

```
## [[1]]
## [1] "times,"       "times,"       "wisdom,"      "foolishness," "belief,"     
## [6] "incredulity," "light,"       "darkness,"    "hope,"
```

--

Simplifying the result a bit.


```r
str_extract_all( text, "(\\w*),", simplify = TRUE)
```

```
##      [,1]     [,2]     [,3]      [,4]           [,5]      [,6]          
## [1,] "times," "times," "wisdom," "foolishness," "belief," "incredulity,"
##      [,7]     [,8]        [,9]   
## [1,] "light," "darkness," "hope,"
```



---

# Matching Sequences

We can define sequences by enclosing them into parentheses.  So to search for all entries that have a `6` and a `0` right next to each other, we could.


```r
str_view( myClasses, "(60)")
```

<div id="htmlwidget-3014e057373eea047979" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-3014e057373eea047979">{"x":{"html":"<ul>\n  <li>ENVS-521<\/li>\n  <li>ENVS-543<\/li>\n  <li>ENVS-<span class='match'>60<\/span>1<\/li>\n  <li>ENVS-<span class='match'>60<\/span>2<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

```r
str_view( myClasses, "ENVS-(60)")
```

<div id="htmlwidget-effce71fdc2ab371ed9b" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-effce71fdc2ab371ed9b">{"x":{"html":"<ul>\n  <li>ENVS-521<\/li>\n  <li>ENVS-543<\/li>\n  <li><span class='match'>ENVS-60<\/span>1<\/li>\n  <li><span class='match'>ENVS-60<\/span>2<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>

---

# Optional Characters - This OR That

This may be convenient when there are a few different kinds of spellings.


```r
str_view( c("gray", "grey"), "r(a|e)y")
```

<div id="htmlwidget-274a369cad696c591dad" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-274a369cad696c591dad">{"x":{"html":"<ul>\n  <li>g<span class='match'>ray<\/span><\/li>\n  <li>g<span class='match'>rey<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>


---

# Numbers of Matches in a Sequence

Let's look at a larger set of words and do some actual detection where we are not intersted in showing the results (using `str_view()` but working with the answers themselves).  

Let's use the built-in `words` data, which has ... words


```r
head( words )
```

```
## [1] "a"        "able"     "about"    "absolute" "accept"   "account"
```

```r
tail( words )
```

```
## [1] "year"      "yes"       "yesterday" "yet"       "you"       "young"
```

```r
length( words )
```

```
## [1] 980
```


---

# Counts of Items

Simply finding something may be good for determining if something exists.  However, we may want to count how many occurrences of something are in the text string.  

Here is an example where we use `str_detect()` to return `TRUE/FALSE` for matching the pattern and then count how many `TRUE` results there are.


```r
startingWithR &lt;- str_detect( words, "^r")
sum( startingWithR )
```

```
## [1] 46
```

--

Could combine the two (looking at words ending in `r` this time) as: 


```r
sum( str_detect( words, "r$")    )
```

```
## [1] 77
```

---

# Negation (the opposite of)

Fraction of words starting with a vowel in vowel


```r
mean( str_detect( words, "^[aeiou]")  )
```

```
## [1] 0.1785714
```

--

vs. the fraction that **DO NOT** start with a vowel


```r
mean( !str_detect( words, "^[aeiou]")  )
```

```
## [1] 0.8214286
```

(n.b., these two numbers *better* sum to 1.0!)


---

# Selecting Elements

The function `str_detect()` is commonly used to find elements in an array that match an expression and then use this result as an index on the sequences to pull them out.


```r
words[ str_detect( words, "r$")   ]
```

```
##  [1] "after"      "air"        "another"    "answer"     "appear"    
##  [6] "bar"        "bear"       "bother"     "brother"    "car"       
## [11] "chair"      "character"  "clear"      "colour"     "confer"    
## [16] "consider"   "corner"     "cover"      "danger"     "dear"      
## [21] "dinner"     "doctor"     "door"       "either"     "enter"     
## [26] "ever"       "fair"       "far"        "father"     "favour"    
## [31] "floor"      "for"        "four"       "further"    "hair"      
## [36] "hear"       "hour"       "however"    "labour"     "letter"    
## [41] "major"      "matter"     "member"     "minister"   "mister"    
## [46] "mother"     "near"       "never"      "number"     "offer"     
## [51] "or"         "order"      "other"      "over"       "pair"      
## [56] "paper"      "particular" "per"        "poor"       "power"     
## [61] "proper"     "quarter"    "rather"     "refer"      "remember"  
## [66] "similar"    "sir"        "sister"     "summer"     "together"  
## [71] "under"      "war"        "water"      "wear"       "whether"   
## [76] "wonder"     "year"
```




---



```r
str_detect( words, "r$")
```

```
##   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [13] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
##  [25] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [37] FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
##  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [73]  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
##  [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
## [109] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [121] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [133] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE
## [145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [157]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [169]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [181] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [193] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [205] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE
## [217] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [229] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE
## [241] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [253] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
## [265] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
## [277] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [289] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [301] FALSE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [313] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [325] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [337] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [349]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [361] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [373] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [385] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [397] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE
## [409] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [421] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [433] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [445] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [457] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [469] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [481] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [493] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [505] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [517] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE
## [529] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
## [541] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [553] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [565] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [577] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE
## [589] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE
## [601] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [613] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [625] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE
## [637] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [649] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
## [661] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [673] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [685] FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE
## [697] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [709] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [721] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [733] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [745] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [757] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE
## [769] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [781] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [793] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [805] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [817] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
## [829] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [841] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [853] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [865] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE
## [877] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [889] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [901] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [913] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [925] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE
## [937] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
## [949] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [961] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [973] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
```


---

# Splitting Strings

It is common for us to try to split strings into sections.  It could be for files we get from a computer (relative to the starting:


```r
geoTIFFS &lt;- list.files(path = "/Users/rodney/Documents/github/classes/ENVS-Lectures", recursive = TRUE, pattern = "tif" )
geoTIFFS
```

```
##  [1] "data/alt_22.tif"                                                                                                            
##  [2] "data/Annual_Precip_22.tif"                                                                                                  
##  [3] "data/DEM_5m.tif"                                                                                                            
##  [4] "data/Maximum_Precip.tif"                                                                                                    
##  [5] "data/Maximum_Temp_22.tif"                                                                                                   
##  [6] "data/Mean_Temp_22.tif"                                                                                                      
##  [7] "data/Minimum_Precip_22.tif"                                                                                                 
##  [8] "data/Minimum_Temp_22.tif"                                                                                                   
##  [9] "data/NLCD_2011_Land_Cover_L48_20190424_qn2B1f8ganicJNKnJN0e.tiff"                                                           
## [10] "data/NLCD_2013_Land_Cover_L48_20190424_qn2B1f8ganicJNKnJN0e.tiff"                                                           
## [11] "data/NLCD_2016_Land_Cover_L48_20190424_qn2B1f8ganicJNKnJN0e.tiff"                                                           
## [12] "docs/deq/1.1_r_environment/data/alt_22.tif"                                                                                 
## [13] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"            
## [14] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"    
## [15] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"                       
## [16] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"               
## [17] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Land_Cover_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff"                       
## [18] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Land_Cover_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"               
## [19] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Tree_Canopy_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff"                      
## [20] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Tree_Canopy_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"              
## [21] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_Land_Cover_Change_Index_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff"               
## [22] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_Land_Cover_Change_Index_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"       
## [23] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_Tree_Canopy_Change_Index_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff"              
## [24] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_Tree_Canopy_Change_Index_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"      
## [25] "lectures/deq/1.1_r_environment/data/alt_22.tif"                                                                             
## [26] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"        
## [27] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"
## [28] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"                   
## [29] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"           
## [30] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Land_Cover_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff"                   
## [31] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Land_Cover_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"           
## [32] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Tree_Canopy_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff"                  
## [33] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Tree_Canopy_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"          
## [34] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_Land_Cover_Change_Index_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff"           
## [35] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_Land_Cover_Change_Index_L48_20190424_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"   
## [36] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_Tree_Canopy_Change_Index_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff"          
## [37] "lectures/landscape/habitat/NLCD_RVA_Gradient/NLCD_Tree_Canopy_Change_Index_L48_20190831_vHkEMUfENR7tqriq0VRl.tiff.aux.xml"
```

---

# Files &amp; File Paths


```r
file &lt;- geoTIFFS[13]
file
```

```
## [1] "docs/landscape/habitat/NLCD_RVA_Gradient/NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"
```

--

It is so common to deal with file names (and so problematic because of the folder specifier is `\` but one platform incorrectly uses `/`)



```r
basename(file)
```

```
## [1] "NLCD_2016_Impervious_descriptor_L48_20190405_vHkEMUfENR7tqriq0VRl.tiff"
```

```r
dirname( file )
```

```
## [1] "docs/landscape/habitat/NLCD_RVA_Gradient"
```

---

.pull-left[

# `str_split()` Components

When we split a string, it is returned as a `list` of objects.

**Lists**

- Lists are a kind of container

- Allow different kinds of data 

- Indexed by **either** number or character key

- Uses 2 [[ and 2 ]] for indexes.
]

.pull-right[

```r
file_parts &lt;- str_split( geoTIFFS, pattern="/")
class( file_parts )
```

```
## [1] "list"
```

```r
length( file_parts )
```

```
## [1] 37
```

```r
file_parts[1:5]
```

```
## [[1]]
## [1] "data"       "alt_22.tif"
## 
## [[2]]
## [1] "data"                 "Annual_Precip_22.tif"
## 
## [[3]]
## [1] "data"       "DEM_5m.tif"
## 
## [[4]]
## [1] "data"               "Maximum_Precip.tif"
## 
## [[5]]
## [1] "data"                "Maximum_Temp_22.tif"
```

```r
file_parts[[1]][2]
```

```
## [1] "alt_22.tif"
```
]



---

# From File Contents

Or from the contents of an individual data file.  This file can be local (as in `~/data/alt_22.tif` in the previous slide) or on a remote computer somewhere.  Here is a data file that I use in teaching and is located in my github repository.  It describes the 100 beer styles recognized for competition by the international Beer Judge Certification Program (BJCP and yes there is such an organization).


```r
beerStyles &lt;- readLines( "https://github.com/dyerlab/ENVS-Lectures/raw/master/data/Beer_Styles.csv")
beerStyles[1:10]
```

```
##  [1] "Styles,Yeast,ABV_Min,ABV_Max,IBU_Min,IBU_Max,SRM_Min,SRM_Max,OG_Min,OG_Max,FG_Min,FG_Max"
##  [2] "American Light Lager,Lager,2.8,4.2,8,12,2,3,1.028,1.04,0.998,1.008"                      
##  [3] "American Lager,Lager,4.2,5.3,8,18,2,4,1.04,1.05,1.004,1.01"                              
##  [4] "Cream Ale,Ale,4.2,5.6,8,20,2.5,5,1.042,1.055,1.006,1.012"                                
##  [5] "American Wheat Beer,Either,4,5.5,15,30,3,6,1.04,1.055,1.008,1.013"                       
##  [6] "International Pale Lager,Either,4.6,6,18,25,2,6,1.042,1.05,1.008,1.012"                  
##  [7] "International Amber Lager,Lager,4.6,6,8,25,7,14,1.042,1.055,1.008,1.014"                 
##  [8] "International Dark Lager,Lager,4.2,6,8,20,14,22,1.044,1.056,1.008,1.012"                 
##  [9] "Czech Pale Lager,Lager,3,4.1,20,35,3,6,1.028,1.044,1.008,1.014"                          
## [10] "Czech Premium Pale Lager,Lager,4.2,5.8,30,45,3.5,6,1.044,1.06,1.013,1.017"
```


---


```r
read_csv("https://github.com/dyerlab/ENVS-Lectures/raw/master/data/Beer_Styles.csv")
```

```
## Rows: 100 Columns: 12
```

```
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (2): Styles, Yeast
## dbl (10): ABV_Min, ABV_Max, IBU_Min, IBU_Max, SRM_Min, SRM_Max, OG_Min, OG_M...
```

```
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

```
## # A tibble: 100 × 12
##    Styles    Yeast ABV_Min ABV_Max IBU_Min IBU_Max SRM_Min SRM_Max OG_Min OG_Max
##    &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 American… Lager     2.8     4.2       8      12     2         3   1.03   1.04
##  2 American… Lager     4.2     5.3       8      18     2         4   1.04   1.05
##  3 Cream Ale Ale       4.2     5.6       8      20     2.5       5   1.04   1.06
##  4 American… Eith…     4       5.5      15      30     3         6   1.04   1.06
##  5 Internat… Eith…     4.6     6        18      25     2         6   1.04   1.05
##  6 Internat… Lager     4.6     6         8      25     7        14   1.04   1.06
##  7 Internat… Lager     4.2     6         8      20    14        22   1.04   1.06
##  8 Czech Pa… Lager     3       4.1      20      35     3         6   1.03   1.04
##  9 Czech Pr… Lager     4.2     5.8      30      45     3.5       6   1.04   1.06
## 10 Czech Am… Lager     4.4     5.8      20      35    10        16   1.04   1.06
## # … with 90 more rows, and 2 more variables: FG_Min &lt;dbl&gt;, FG_Max &lt;dbl&gt;
```


.footnote[ `read_csv()` is in the `readr` library which is part of the `tidyverse.]


























---

class: middle
background-image: url("images/contour.png")
background-position: right
background-size: auto

.center[

# Questions?


![Peter Sellers](images/peter_sellers.gif)
]

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

.bottom[ If you have any questions for about the content presented herein, please feel free to [submit them to me](https://docs.google.com/forms/d/e/1FAIpQLScrAGM5Zl8vZTPqV8DVSnSrf_5enypyp0717jG4PZiTlVHDjQ/viewform?usp=sf_link) and I'll get back to you as soon as possible.]


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
